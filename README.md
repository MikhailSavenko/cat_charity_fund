# QRKot - Благотворительный фонд поддержки котиков

## Описание проекта

QRKot — это платформа для управления благотворительными проектами и пожертвованиями. Фонд может содержать несколько целевых проектов с указанием суммы, необходимой для сбора. Пользователи могут делать пожертвования, которые автоматически распределяются по проектам по принципу "First In, First Out".

### Основные функции:
- **Проекты**: Каждый проект имеет уникальное название, описание и целевую сумму для сбора. Когда нужная сумма собрана, проект автоматически закрывается.
- **Пожертвования**: Пожертвования не привязаны к конкретному проекту. Средства автоматически распределяются по проектам, начиная с самого старого из открытых.
- **Пользователи**: Администраторы создают проекты, а обычные пользователи могут делать пожертвования и просматривать свои транзакции.

## Технологии

Проект построен с использованием следующих технологий:

- **FastAPI** — основной фреймворк для разработки API.
- **SQLAlchemy** — ORM для работы с базой данных.
- **SQLite** — база данных для разработки и тестирования.
- **Alembic** — система миграций базы данных.
- **FastAPI Users** — управление пользователями и аутентификацией с помощью JWT.

## Установка и настройка

### Клонирование репозитория

```bash
git clone https://github.com/MikhailSavenko/cat_charity_fund.git
cd cat_charity_fund
```

### Установка зависимостей

Создайте и активируйте виртуальное окружение:

```bash
python -m venv venv
source venv/bin/activate
```

Установите зависимости:

```bash
pip install -r requirements.txt
```

### Настройка базы данных

Проект по умолчанию использует SQLite:

```bash
# app/core/config.py
DATABASE_URL = 'sqlite+aiosqlite:///./fastapi.db'
```

### Запуск приложения

```bash
uvicorn app.main:app --reload
```

Документация API будет доступна по адресу [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs).

## Модели данных

### CharityProject

- **id** (PK): Идентификатор проекта.
- **name**: Название проекта.
- **description**: Описание проекта.
- **full_amount**: Сумма, необходимая для завершения проекта.
- **invested_amount**: Сумма, внесённая в проект.
- **fully_invested**: Булево значение, показывающее, собрана ли нужная сумма.
- **create_date**: Дата создания проекта.
- **close_date**: Дата закрытия проекта.

### Donation

- **id** (PK): Идентификатор пожертвования.
- **user_id**: Пользователь, сделавший пожертвование.
- **comment**: Комментарий к пожертвованию.
- **full_amount**: Сумма пожертвования.
- **invested_amount**: Сумма, распределённая по проектам.
- **fully_invested**: Булево значение, показывающее, распределены ли средства.
- **create_date**: Дата пожертвования.
- **close_date**: Дата, когда все средства были распределены.

## Права пользователей

- **Администраторы**: Создание и редактирование проектов.
- **Пользователи**: Возможность делать пожертвования и просматривать свои транзакции.
